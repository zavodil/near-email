# near.email TESTNET Environment
# Copy this file to .env.testnet and fill in values
#
# Usage:
#   cp .env.testnet.example .env.testnet
#   docker-compose -f docker-compose.testnet.yml --env-file .env.testnet up -d

# Database password
POSTGRES_PASSWORD=testnet_password_change_me

# OutLayer API URL (testnet)
OUTLAYER_API_URL=https://testnet-api.outlayer.fastnear.com

# ============================================================
# MASTER_PUBLIC_KEY - Get from OutLayer after creating secret
# ============================================================
#
# Option 1: Fetch from OutLayer (recommended)
#   1. Create project "near-email-testnet" in OutLayer dashboard
#   2. Add secret PROTECTED_MASTER_KEY (type: Hex 32 bytes)
#   3. Fetch public key:
#      curl -X POST https://testnet-api.outlayer.fastnear.com/execute/near-email-testnet \
#        -H "Content-Type: application/json" \
#        -d '{"action": "get_master_public_key"}'
#   4. Copy the "public_key" value here
#
# Option 2: Use test key (for local testing ONLY, not secure!)
#   Private: 0101010101010101010101010101010101010101010101010101010101010101
#   Public:  031b84c5567b126440995d3ed5aaba0565d71e1834604819ff9c17f5e9d5dd078f
#
MASTER_PUBLIC_KEY=031b84c5567b126440995d3ed5aaba0565d71e1834604819ff9c17f5e9d5dd078f

# ============================================================
# DKIM signing for outgoing emails
# ============================================================
# Generate RSA key pair:
#   openssl genrsa -out dkim.private.pem 2048
#   openssl rsa -in dkim.private.pem -pubout -out dkim.public.pem
#
# Then add DNS TXT record for mail._domainkey.near.email with the public key
#
# DKIM_PRIVATE_KEY should contain the full PEM key (including headers)
# For multiline values in .env, replace newlines with \n or use Docker secrets
#
DKIM_PRIVATE_KEY=
DKIM_SELECTOR=mail

# ============================================================
# For WASI module deployment (OutLayer secrets)
# ============================================================
# Add these as secrets in OutLayer dashboard for project "near-email-testnet":
#
# | Secret Name            | Type           | Value                              |
# |------------------------|----------------|-------------------------------------|
# | PROTECTED_MASTER_KEY     | Hex 32 bytes   | (generate in dashboard)            |
# | DATABASE_API_URL       | Manual         | https://mail.near.email            |
# | DEFAULT_ACCOUNT_SUFFIX | Manual         | .testnet                           |
#
# Note: DATABASE_API_URL doesn't need authentication because all emails
# are stored encrypted. Only the WASI module (with PROTECTED_MASTER_KEY) can decrypt.
